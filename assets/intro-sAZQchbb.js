var S=Object.defineProperty,X=Object.defineProperties;var A=Object.getOwnPropertyDescriptors;var C=Object.getOwnPropertySymbols;var D=Object.prototype.hasOwnProperty,z=Object.prototype.propertyIsEnumerable;var $=(s,n,t)=>n in s?S(s,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[n]=t,g=(s,n)=>{for(var t in n||(n={}))D.call(n,t)&&$(s,t,n[t]);if(C)for(var t of C(n))z.call(n,t)&&$(s,t,n[t]);return s},h=(s,n)=>X(s,A(n));var N=(s,n,t)=>new Promise((a,i)=>{var _=o=>{try{m(t.next(o))}catch(l){i(l)}},u=o=>{try{m(t.throw(o))}catch(l){i(l)}},m=o=>o.done?a(o.value):Promise.resolve(o.value).then(_,u);m((t=t.apply(s,n)).next())});import{r as p,j as r}from"./vendor-Czmxryr-.js";import{u as V}from"./appstoresfirst-CXhrKgcP.js";import{p as F,a as q,b as B,c as G,d as H,e as J,f as K,g as O,h as Q}from"./carousel-DHCuXbNI.js";import{u as k,m as E}from"./framer-motion-C-ES3002.js";const U="_Intro_mpixn_2",W="_Intro__container_mpixn_8",Z="_Intro__animals_mpixn_24",tt="_Intro__animal_mpixn_24",c={Intro:U,Intro__container:W,Intro__animals:Z,Intro__animal:tt};function mt({id:s,isActive:n}){const t=V(),a=[{img:B,avif:q,webp:F,alt:"TamTam Ягнёнок",width:t?281:871,height:t?409:896,style:{width:t?"92vw":"54vw"}},{img:J,avif:H,webp:G,alt:"TamTam Щенок",width:t?281:871,height:t?409:896,style:{width:t?"92vw":"47vw"}},{img:Q,avif:O,webp:K,alt:"TamTam Котёнок",width:t?281:871,height:t?409:896,style:{width:t?"97vw":"47vw"}}],[i,_]=p.useState([0,1]),u=p.useRef({left:{y:"35vh",rotate:15},right:{y:"35vh",rotate:-18}}),m=k(),o=k(),l=p.useRef(null),x={type:"spring",stiffness:100,damping:15,mass:1},d={type:"spring",stiffness:75.8,damping:11,mass:1},e=t?{leftY:"35vh",rightY:"-10vh",leftRotate:21,rightRotate:-40,centerX:"35vw",defaultRightRotate:-20,useRandom:!1}:{yRange:{min:30,max:40},leftRotateRange:{min:8,max:18},rightRotateRange:{min:-8,max:-18},centerX:"35vw",defaultLeftRotate:15,defaultRightRotate:-18,useRandom:!0},y=()=>`${(e.yRange.min+Math.random()*(e.yRange.max-e.yRange.min)).toFixed(2)}vh`,M=()=>e.leftRotateRange.min+Math.random()*(e.leftRotateRange.max-e.leftRotateRange.min),P=()=>e.rightRotateRange.min+Math.random()*(e.rightRotateRange.max-e.rightRotateRange.min),I=()=>e.useRandom?y():e.leftY,b=()=>e.useRandom?y():e.rightY,j=()=>e.useRandom?M():e.leftRotate,T=()=>e.useRandom?P():e.rightRotate,Y=()=>N(this,null,function*(){const f=I(),L=b(),v=j(),w=T();u.current={left:{y:f,rotate:v},right:{y:L,rotate:w}},yield Promise.all([m.start({x:`-${e.centerX}`,y:f,rotate:v,transition:h(g({},x),{duration:1})}),o.start({x:e.centerX,y:L,rotate:w,transition:h(g({},x),{duration:1})})]),yield new Promise(R=>setTimeout(R,1500)),yield Promise.all([m.start({x:"-100vw",y:"100vh",rotate:v,transition:h(g({},d),{duration:1})}),o.start({x:"100vw",y:t?"0":"100vh",rotate:w,transition:h(g({},d),{duration:1})})]),_(R=>[(R[0]+1)%a.length,(R[1]+1)%a.length])});return p.useEffect(()=>{let f;return n?(_([0,1]),u.current={left:{y:I(),rotate:j()},right:{y:b(),rotate:T()}},f=setTimeout(()=>{Y(),l.current=setInterval(Y,3500)},800)):(l.current&&(clearInterval(l.current),l.current=null),m.stop(),o.stop(),Promise.all([m.start({x:"-100vw",y:t?"100vh":"-100vh",rotate:u.current.left.rotate,transition:h(g({},d),{duration:1})}),o.start({x:"100vw",y:t?"0":"100vh",rotate:u.current.right.rotate,transition:h(g({},d),{duration:1})})])),()=>{clearTimeout(f),l.current&&clearInterval(l.current),m.stop(),o.stop()}},[n,m,o,a.length,t]),r.jsx("div",{className:c.Intro,id:s,"aria-label":"Вступительная секция",children:r.jsxs("div",{className:c.Intro__container,children:[r.jsx("h1",{className:c.Intro__title,children:"Tam Tam Мой милый питомец"}),r.jsxs("div",{className:c.Intro__animals,children:[r.jsx(E.div,{className:`${c.Intro__animal} ${c.Intro__animal_1}`,initial:{x:"-100vw",y:"100vh",rotate:e.defaultLeftRotate},animate:m,children:r.jsxs("picture",{children:[r.jsx("source",{type:"image/avif",srcSet:a[i[0]].avif}),r.jsx("source",{type:"image/webp",srcSet:a[i[0]].webp}),r.jsx("img",{src:a[i[0]].img,width:a[i[0]].width,height:a[i[0]].height,alt:a[i[0]].alt,style:a[i[0]].style,loading:"lazy"})]})}),r.jsx(E.div,{className:`${c.Intro__animal} ${c.Intro__animal_2}`,initial:{x:"100vw",y:t?"0":"100vh",rotate:e.defaultRightRotate},animate:o,children:r.jsxs("picture",{children:[r.jsx("source",{type:"image/avif",srcSet:a[i[1]].avif}),r.jsx("source",{type:"image/webp",srcSet:a[i[1]].webp}),r.jsx("img",{src:a[i[1]].img,width:a[i[1]].width,height:a[i[1]].height,alt:a[i[1]].alt,style:a[i[1]].style,loading:"lazy"})]})})]})]})})}export{mt as I};
