import{r as s,j as c,g as C,M as Q}from"./vendor-CA5nZKRz.js";import{u as V}from"./appstoresfirst-DvSMWRjq.js";const X={intro:{background:"#5B71C1",fill:"#5B71C1",outline:"#FCCD67",scrollLockDuration:2e3},slider:{background:"#39C883",fill:"#2EA56C",outline:"#FCCD67",scrollLockDuration:1500},storesFirst:{background:"#EA437B",fill:"#C41650",outline:"#F49CBA",scrollLockDuration:2e3},carousel:{background:"#39C883",fill:"#2EA56C",outline:"#FCCD67",scrollLockDuration:8e3},channels:{background:"#5B71C1",fill:"#5B71C1",outline:"#FCCD67",scrollLockDuration:6e3},storesSecond:{background:"#39C883",fill:"#2EA56C",outline:"#FCCD67",scrollLockDuration:2e3},news:{background:"#EA437B",fill:"#C41650",outline:"#F49CBA",scrollLockDuration:4e3},footer:{background:"#5B71C1",fill:"#5B71C1",outline:"#FCCD67",scrollLockDuration:6e3}},H=s.createContext();function qe({children:g}){const[u,r]=s.useState("intro"),[f,m]=s.useState(!0),[_,o]=s.useState(0),y=s.useCallback(p=>{o(p)},[]),v={currentSection:u,setCurrentSection:p=>{r(p),m(p==="intro")},sectionConfig:X,isIntroSection:f,setIsIntroSection:m,carouselSlide:_,updateCarouselSlide:y};return c.jsx(H.Provider,{value:v,children:g})}const J=()=>s.useContext(H),Y="/tam-tam-prod/assets/images/pet-1.png",Z="/tam-tam-prod/assets/images/pet-1.avif",ee="/tam-tam-prod/assets/images/pet-1.webp",te="/tam-tam-prod/assets/images/pet-2.png",ae="/tam-tam-prod/assets/images/pet-2.avif",re="/tam-tam-prod/assets/images/pet-2.webp",se="/tam-tam-prod/assets/images/pet-3.png",oe="/tam-tam-prod/assets/images/pet-3.avif",ie="/tam-tam-prod/assets/images/pet-3.webp",U="/tam-tam-prod/assets/images/carousel-intro-1.png",ne="/tam-tam-prod/assets/images/carousel-intro-1.avif",G="/tam-tam-prod/assets/images/carousel-intro-2.png",ce="/tam-tam-prod/assets/images/carousel-intro-2.avif",ue="/tam-tam-prod/assets/images/carousel-text.svg",le="/tam-tam-prod/assets/images/carousel-text-mob.svg",me="/tam-tam-prod/assets/images/carouse-1.png",pe="/tam-tam-prod/assets/images/carouse-1.avif",de="/tam-tam-prod/assets/images/carouse-1.webp",ge="/tam-tam-prod/assets/images/carouse-2.png",fe="/tam-tam-prod/assets/images/carouse-2.avif",be="/tam-tam-prod/assets/images/carouse-2.webp",ve="/tam-tam-prod/assets/images/carouse-3.png",xe="/tam-tam-prod/assets/images/carouse-3.avif",ye="/tam-tam-prod/assets/images/carouse-3.webp",Ce="/tam-tam-prod/assets/images/carouse-4.png",_e="/tam-tam-prod/assets/images/carouse-4.avif",he="/tam-tam-prod/assets/images/carouse-4.webp",we="/tam-tam-prod/assets/images/carouse-5.png",ke="/tam-tam-prod/assets/images/carouse-5.avif",Se="/tam-tam-prod/assets/images/carouse-5.webp",Fe="/tam-tam-prod/assets/images/carouse-6.png",Be="/tam-tam-prod/assets/images/carouse-6.avif",je="/tam-tam-prod/assets/images/carouse-6.webp",Ae="/tam-tam-prod/assets/images/carouse-7.png",De="/tam-tam-prod/assets/images/carouse-7.avif",Ee="/tam-tam-prod/assets/images/carouse-7.webp";function Re({id:g,isActive:u}){const r=V(),f=s.useRef(null),m=s.useRef(null),_=s.useRef(null),o=s.useRef([]),y=s.useRef([]),b=s.useRef(null),v=s.useRef(null),p=s.useRef(null),B=s.useRef(null),[x,E]=s.useState(!1),[R,I]=s.useState(!1),{updateCarouselSlide:h}=J(),[Ie,Me]=s.useState(0);s.useEffect(()=>()=>{u||(h(0),E(!1),I(!1))},[u,h]);const w=s.useMemo(()=>[{picture:{img:U,avif:ne,webp:U},angle:14,title:"Пшеница"},{picture:{img:G,avif:ce,webp:G},angle:0,title:"Тортик"}],[]),j=s.useMemo(()=>[{title:"Люби",icon:{img:me,avif:pe,webp:de}},{title:"Играй",icon:{img:ge,avif:fe,webp:be}},{title:"Ухаживай",icon:{img:ve,avif:xe,webp:ye}},{title:"Наряжай",icon:{img:Ce,avif:_e,webp:he}},{title:"Корми",icon:{img:we,avif:ke,webp:Se}},{title:"Заботься",icon:{img:Fe,avif:Be,webp:je}},{title:"Веселись",icon:{img:Ae,avif:De,webp:Ee}}],[]),M=s.useMemo(()=>[{x:r?"-352%":"-259%",y:"-214%",width:r?"5.5rem":"9.3vw",isSpecial:!1},{x:"-311%",y:"-81%",width:r?"6rem":"10vw",isSpecial:!1},{x:"-214%",y:"43%",width:r?"6.5rem":"11vw",isSpecial:!1},{x:"-50%",y:"74%",width:r?"7rem":"12vw",isSpecial:!0,background:"#2ea56c",borderColor:"#80dcb0",scaleImg:1.5,fontSize:r?"29px":"2.8vw",marginTop:"3.3vh"},{x:"110%",y:"41%",width:r?"6.5rem":"11vw",isSpecial:!1},{x:"212%",y:"-82%",width:r?"6rem":"10vw",isSpecial:!1},{x:r?"253%":"157%",y:"-217%",width:r?"5.5rem":"9.3vw",isSpecial:!1,isAround:!0}],[]),l=s.useMemo(()=>[{pet:{img:se,avif:oe,webp:ie,alt:"TamTam Котёнок"},background:"#39C883",fill:"#2EA56C",outline:"#FCCD67",borderBack:"#FFFFFFA3",borderMain:"#80DCB0",iconBack:"#82CAA7",iconMain:"#2EA56C",specialBackground:"#2ea56c",specialBorder:"#80dcb0"},{pet:{img:te,avif:ae,webp:re,alt:"TamTam Ягнёнок"},background:"#EA437B",fill:"#C41650",outline:"#F49CBA",borderBack:"#FFFFFFA3",borderMain:"#F49CBA",iconBack:"#DD89A6",iconMain:"#C41650",specialBackground:"#C41650",specialBorder:"#F49CBA"},{pet:{img:Y,avif:Z,webp:ee,alt:"TamTam Щенок"},background:"#FFBE2D",fill:"#FFBE2D",outline:"#FFD881",borderBack:"#FFFFFFA3",borderMain:"#FFE6AF",iconBack:"#E4C37A",iconMain:"#FFBE2D",specialBackground:"#FFBE2D",specialBorder:"#FFE6AF"}],[]);typeof window!="undefined"&&C.registerPlugin(Q);const N=s.useCallback(()=>{if(!f.current)return;const a=C.context(()=>{const e=C.timeline({onComplete:()=>{E(!0),I(!0)}});if(m.current&&e.to(m.current,{scale:1,duration:1.2,ease:"elastic.out(0.9, 0.6)"},.5),y.current.forEach((t,i)=>{if(!t||!w[i])return;const n=w[i].angle;e.to(t,{opacity:1,rotation:n,duration:1,ease:"linear"},2)}),m.current&&e.to(m.current,{top:"-100%",duration:1,ease:"linear"},4),y.current.forEach(t=>{t&&e.to(t,{top:"-100%",duration:1,ease:"linear"},4)}),e.to(v.current,{scale:1,duration:1,ease:"elastic.out(0.9, 0.6)"},5.5),o.current[0]&&e.set(o.current[0],{x:"-50%",y:"74%",width:r?"7rem":"12vw"},5.5),o.current[1]&&e.set(o.current[1],{x:"110%",y:"41%",width:r?"6.5rem":"11vw"},5.5),o.current[2]&&e.set(o.current[2],{x:"212%",y:"-82%",width:r?"6rem":"10vw"},5.5),o.current[3]&&e.set(o.current[3],{x:r?"253%":"157%",y:"-217%",width:r?"5.5rem":"9.3vw"},5.5),o.current[4]&&e.set(o.current[4],{x:r?"-352%":"-259%",y:"-214%",width:r?"5.5rem":"9.3vw"},5.5),o.current[5]&&e.set(o.current[5],{x:"-311%",y:"-81%",width:r?"6rem":"10vw"},5.5),o.current[6]&&e.set(o.current[6],{x:"-214%",y:"43%",width:r?"6.5rem":"11vw"},5.5),e.to(_.current,{opacity:1,duration:.6,ease:"none"},5.7),o.current[0]&&e.to(o.current[0],{duration:1.2,ease:"linear",motionPath:{path:[{x:"-50%",y:"74%"},{x:"-214%",y:"43%"},{x:"-311%",y:"-81%"},{x:r?"-352%":"-259%",y:"-214%"}],curviness:1.2,type:"soft"},width:r?"5.5rem":"9.3vw"},5.7),o.current[1]&&e.to(o.current[1],{duration:1.2,ease:"linear",motionPath:{path:[{x:"110%",y:"41%"},{x:"-50%",y:"74%"},{x:"-214%",y:"43%"},{x:"-311%",y:"-81%"}],curviness:1.2,type:"soft"},width:r?"6rem":"10vw"},5.7),o.current[2]&&e.to(o.current[2],{duration:1.2,ease:"linear",motionPath:{path:[{x:"212%",y:"-82%"},{x:"110%",y:"41%"},{x:"-50%",y:"74%"},{x:"-214%",y:"43%"}],curviness:1.2,type:"soft"},width:r?"6.5rem":"11vw"},5.7),o.current[3]&&e.to(o.current[3],{duration:1.2,ease:"linear",motionPath:{path:[{x:r?"253%":"157%",y:"-217%"},{x:"212%",y:"-82%"},{x:"110%",y:"41%"},{x:"-50%",y:"74%"}],curviness:1.2,type:"soft"},width:r?"7rem":"12vw"},5.7),o.current[4]&&e.to(o.current[4],{duration:1.2,ease:"linear",motionPath:{path:[{x:r?"-352%":"-259%",y:"-214%"},{x:"-50%",y:r?"-450%":"-284%"},{x:r?"253%":"157%",y:"-217%"},{x:"212%",y:"-82%"},{x:"110%",y:"41%"}],curviness:1.5,type:"soft"},width:r?"6.5rem":"11vw"},5.7),o.current[5]&&e.to(o.current[5],{duration:1.2,ease:"linear",motionPath:{path:[{x:"-311%",y:"-81%"},{x:r?"-352%":"-259%",y:"-214%"},{x:"-50%",y:r?"-450%":"-284%"},{x:r?"253%":"157%",y:"-217%"},{x:"212%",y:"-82%"}],curviness:1.5,type:"soft"},width:r?"6rem":"10vw"},5.7),o.current[6]&&e.to(o.current[6],{duration:1.2,ease:"linear",motionPath:{path:[{x:"-214%",y:"43%"},{x:"-311%",y:"-81%"},{x:r?"-352%":"-259%",y:"-214%"},{x:"-50%",y:r?"-450%":"-284%"},{x:r?"253%":"157%",y:"-217%"}],curviness:1.5,type:"soft"},width:r?"5.5rem":"9.3vw"},5.7),o.current[3]){const t=o.current[3].querySelector(".Carousel__icon"),i=t==null?void 0:t.querySelector("img");t&&(e.to(t,{backgroundColor:"#2ea56c",borderColor:"#80dcb0",duration:1,ease:"power2.inOut"},6.9),i&&e.to(i,{scale:1.5,y:"10%",duration:1,ease:"power2.inOut"},6.9))}B.current=e},f);return()=>a.revert()},[w]);s.useEffect(()=>(u&&!x&&N(),()=>{B.current&&B.current.kill()}),[u,x,N]);const T=s.useCallback((a,e,t)=>{t.to(a,{duration:1.5,ease:"power2.inOut",motionPath:{path:[{x:"-50%",y:r?"-450%":"-284%"},{x:e.x,y:e.y}],curviness:1.5,type:"soft"},width:e.width},0)},[]),q=s.useCallback((a,e,t)=>{t.to(a,{duration:1.5,ease:"power2.inOut",x:e.x,y:e.y,width:e.width},0)},[]),L=s.useCallback((a,e,t,i)=>{const n={duration:1.5,ease:"power2.inOut"};e.isSpecial?(n.backgroundColor=t.specialBackground,n.borderColor=t.specialBorder):(n.backgroundColor=t.iconBack,n.borderColor=t.borderBack),i.to(a,n,0)},[]),O=s.useCallback((a,e,t)=>{t.to(a,{duration:1.5,ease:"power2.inOut",scale:e.isSpecial?e.scaleImg||1.5:1,y:e.isSpecial?"10%":"0%"},0)},[]),z=s.useCallback((a,e,t)=>{t.to(a,{duration:1.5,ease:"power2.inOut",fontSize:e.isSpecial?e.fontSize||r?"29px":"2.8vw":r?"25px":"2vw",marginTop:e.isSpecial?e.marginTop||"3.3vh":"1vh"},0)},[]),$=s.useCallback((a,e,t,i)=>{if(!a)return;const n=a.querySelector(".Carousel__icon"),d=n==null?void 0:n.querySelector("img"),F=a.querySelector(".Carousel__title");e.isAround?T(a,e,i):q(a,e,i),n&&(L(n,e,t,i),d&&O(d,e,i)),F&&z(F,e,i)},[T,q,L,O,z]),k=s.useCallback(()=>{const a=Array(7);for(let e=0;e<7;e++)a[e]={item:j[e],position:M[e]};return a},[j,M]),A=s.useCallback(a=>{if(!a)return k();const e=Array(7),t=a[6];for(let i=6;i>0;i--)e[i]=a[i-1];return e[0]=t,e},[k]),S=s.useCallback(a=>l[a%l.length],[l]),P=s.useCallback((a,e,t)=>{if(!p.current)return;const i=S(t-1),n=p.current;n.style.setProperty("--bg-color-current",i.background),n.style.setProperty("--bg-color-next",a.background),e.fromTo(n,{"--bg-progress":"0%",background:"linear-gradient(to left, var(--bg-color-next) 0%, var(--bg-color-next) 0%, var(--bg-color-current) 0%, var(--bg-color-current) 100%)"},{"--bg-progress":"100%",duration:1.5,ease:"power2.inOut",background:"linear-gradient(to left, var(--bg-color-next) 0%, var(--bg-color-next) var(--bg-progress), var(--bg-color-current) var(--bg-progress), var(--bg-color-current) 100%)",onComplete:()=>{n.style.background=a.background,n.style.setProperty("--bg-color-current",a.background)}},0)},[S]),W=s.useCallback((a,e)=>{if(!v.current)return;const t=v.current.querySelector(".Carousel__picture"),i=t==null?void 0:t.querySelector("img"),n=t==null?void 0:t.querySelector('source[type="image/avif"]'),d=t==null?void 0:t.querySelector('source[type="image/webp"]');!t||!i||(e.to(t,{duration:.5,ease:"power2.in",opacity:0,scale:.8,y:20},.2),e.add(()=>{n&&n.setAttribute("srcset",a.pet.avif),d&&d.setAttribute("srcset",a.pet.webp),i.setAttribute("src",a.pet.img),i.setAttribute("alt",a.pet.alt)},.7),e.to(t,{duration:1,ease:"elastic.out(0.9, 0.5)",opacity:1,scale:1,y:0},.7))},[]),D=s.useCallback((a,e)=>{if(!a||!o.current.length)return;b.current&&b.current.kill();const t=C.context(()=>{const i=C.timeline(),n=S(e);P(n,i,e),W(n,i),a.forEach(({position:d},F)=>{const K=o.current[F];$(K,d,n,i)}),b.current=i},f);return h(e%l.length),()=>t.revert()},[S,P,W,$,h,l.length]);return s.useEffect(()=>{if(!u||!x||!R)return;let a=k(),e=0;const t=setTimeout(()=>{const n=A(a);D(n,e+1),a=n,e++},500),i=setInterval(()=>{const n=A(a);D(n,e+1),a=n,e++},3500);return()=>{clearTimeout(t),clearInterval(i),b.current&&b.current.kill()}},[u,x,R,k,A,D]),c.jsxs("div",{id:g,ref:f,className:"Carousel",role:"region","aria-label":"Карусель ухода за питомцем",children:[c.jsx("div",{ref:p,className:"Carousel__background","aria-hidden":"true"}),c.jsxs("div",{className:"Carousel__container",children:[c.jsxs("div",{className:"Carousel__intro","aria-hidden":x,children:[c.jsx("div",{ref:m,className:"Carousel__text",children:c.jsx("img",{src:r?le:ue,width:"970",height:"296",alt:"Как заботиться о питомце?",loading:"lazy",decoding:"async"})}),c.jsx("ul",{className:"Carousel__elements",children:w.map(({picture:a,title:e},t)=>c.jsx("li",{ref:i=>y.current[t]=i,className:`Carousel__element Carousel__element_${t+1}`,"aria-hidden":"true",children:c.jsxs("picture",{children:[c.jsx("source",{type:"image/avif",srcSet:a.avif}),c.jsx("source",{type:"image/webp",srcSet:a.webp}),c.jsx("img",{src:a.img,width:"581",height:"598",alt:e,loading:"lazy",decoding:"async"})]})},`intro_${t}`))})]}),c.jsxs("div",{className:"Carousel__carousel","aria-hidden":!x,children:[c.jsx("div",{ref:v,className:"Carousel__character",children:c.jsx("div",{className:"Carousel__picture",children:c.jsxs("picture",{children:[c.jsx("source",{type:"image/avif",srcSet:l[0].pet.avif}),c.jsx("source",{type:"image/webp",srcSet:l[0].pet.webp}),c.jsx("img",{src:l[0].pet.img,width:"447",height:"564",alt:l[0].pet.alt,loading:"lazy",decoding:"async"})]})})}),c.jsx("ul",{ref:_,className:"Carousel__items",role:"list","aria-label":"Способы ухода за питомцем",children:j.map(({title:a,icon:e},t)=>c.jsxs("li",{ref:i=>o.current[t]=i,className:`Carousel__item Carousel__item_${t+1}`,role:"listitem","aria-label":a,children:[c.jsx("div",{className:"Carousel__icon",children:c.jsxs("picture",{children:[c.jsx("source",{type:"image/avif",srcSet:e.avif}),c.jsx("source",{type:"image/webp",srcSet:e.webp}),c.jsx("img",{src:e.img,width:"395",height:"395",alt:"",loading:"lazy",decoding:"async","aria-hidden":"true"})]})}),c.jsx("div",{className:"Carousel__title",children:a})]},`item_${t}`))})]})]})]})}function Le({id:g,isActive:u}){const{currentSection:r}=J();return c.jsx(Re,{id:g,isActive:u},`${g}-${r}`)}export{Le as C,qe as S,Z as a,Y as b,re as c,ae as d,te as e,ie as f,oe as g,se as h,ee as p,J as u};
