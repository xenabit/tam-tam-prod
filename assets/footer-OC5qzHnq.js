import{r as t,j as r,u as V,a as W,g as L,L as H}from"./vendor-Czmxryr-.js";import{u as q}from"./appstoresfirst-DfM07GiT.js";const M=t.createContext();function se({children:R}){const o=t.useCallback((u,p=1500)=>{if(!document.getElementById(u))return console.warn(`Секция с id "${u}" не найдена`),!1;const a=["intro","slider","storesFirst","carousel","channels","storesSecond","news","footer"].indexOf(u);if(a===-1)return!1;const _=document.querySelector(".scroll-container");if(!_)return!1;const i=_.querySelectorAll(".section");if(!i[a])return!1;const y=new IntersectionObserver(k=>{k.forEach(b=>{if(b.isIntersecting){const I=new CustomEvent("sectionChange",{detail:{sectionId:u}});window.dispatchEvent(I)}})},{root:_,threshold:.8});return y.observe(i[a]),i[a].scrollIntoView({behavior:"smooth",block:"start"}),setTimeout(()=>{y.disconnect()},p),window.history.pushState(null,"",`#${u}`),!0},[]),h=t.useCallback((u,p,g)=>{u.preventDefault();const s=u.currentTarget.getAttribute("href");if(!s||!s.startsWith("#"))return;const a=s.substring(1);if(g.pathname!=="/"){p(`/#${a}`),setTimeout(()=>{o(a)},100);return}o(a)},[o]),v={scrollToSection:o,handleNavigation:h};return r.jsx(M.Provider,{value:v,children:R})}const z=()=>t.useContext(M),X="_Footer_mns3v_2",D="_Footer__container_mns3v_19",U="_Footer__right_mns3v_27",Y="_Footer__left_mns3v_32",G="_Footer__links_mns3v_35",J="_Footer__contacts_mns3v_45",K="_Footer__laba_mns3v_53",Q="_Footer__stars_mns3v_56",Z="_Footer__link_mns3v_35",l={Footer:X,Footer__container:D,Footer__right:U,Footer__left:Y,Footer__links:G,Footer__contacts:J,Footer__laba:K,Footer__stars:Q,Footer__link:Z},ee="/assets/images/star.svg",te="/assets/images/header-logo.svg";function ae({id:R,isActive:o}){const h=t.useRef(null),v=t.useRef(null),u=t.useRef([]),p=t.useRef(null),{handleNavigation:g}=z(),s=t.useRef(null);t.useRef(0);const a=t.useRef([]),_=t.useRef([]),i=t.useRef(null),y=V(),k=W(),b=q(),I=t.useCallback(e=>{g(e,y,k)},[g,y,k]),$=(()=>{if(b)return 8;const e=window.innerWidth*window.innerHeight;return e<12e5?18:e<2e6?24:30})(),O=[{x:20,y:25},{x:0,y:-25},{x:0,y:35},{x:-44,y:-42},{x:44,y:-42},{x:-48,y:0},{x:48,y:0},{x:-30,y:-32},{x:30,y:-32},{x:-30,y:30},{x:30,y:30},{x:-8,y:-4},{x:0,y:20},{x:-300,y:-200},{x:300,y:-200},{x:-300,y:200},{x:300,y:200},{x:-350,y:-100},{x:350,y:-100}].slice(0,$),C=t.useCallback(()=>{i.current&&i.current.pause(),_.current.forEach(e=>{e&&e.pause&&e.pause()}),s.current&&(cancelAnimationFrame(s.current),s.current=null)},[]),j=t.useCallback(()=>{i.current&&i.current.play(),_.current.forEach(e=>{e&&e.play&&e.play()}),o&&T()},[o]),F=t.useCallback(()=>{C(),i.current&&(i.current.kill(),i.current=null),_.current.forEach(e=>{e&&e.kill&&e.kill()}),_.current=[],!o&&h.current&&(h.current.innerHTML="",a.current=[])},[o,C]),f=t.useCallback(()=>document.visibilityState==="visible",[]),N=t.useCallback((e,d,c)=>{const n=new Image;return n.src=ee,n.alt="",n.loading="eager",n.decoding="async",Object.assign(n.style,{position:"absolute",left:`${50+e}%`,top:`${50+d}%`,transform:`translate(-50%, -50%) scale(${c})`,willChange:"transform",contain:"strict",backfaceVisibility:"hidden",pointerEvents:"none",userSelect:"none",zIndex:-1}),h.current.appendChild(n),a.current.push(n),n},[]),S=t.useCallback(e=>{const d=Math.random()*4+7,c=L.to(e,{left:"50%",top:"50%",scale:0,duration:d,ease:"linear",onComplete:()=>{const n=a.current.indexOf(e);n>-1&&a.current.splice(n,1);const m=_.current.indexOf(c);m>-1&&_.current.splice(m,1),e.remove()}});return _.current.push(c),c},[]),P=b?400:160,A=b?25:80,E=t.useCallback(()=>{if(!f()||!o||a.current.length>=A)return;const e=(w,B)=>Math.random()*(B-w)+w,d=e(0,Math.PI*2),c=e(70,100),n=Math.cos(d)*c,m=Math.sin(d)*c,x=N(n,m,e(.4,.8));S(x)},[o,N,S,f]),T=t.useCallback(()=>{if(!f()||!o||s.current)return;const e=()=>{if(!f()||!o){clearInterval(s.current),s.current=null;return}E()};s.current&&clearInterval(s.current),s.current=setInterval(e,P)},[o,E,f]);return t.useEffect(()=>{if(!o){F();return}const e=L.context(()=>{},h),d=(x,w)=>Math.random()*(w-x)+x,c=O.map(x=>N(x.x,x.y,d(.4,1))),n=L.timeline({defaults:{ease:"linear"},paused:!f()});i.current=n,n.fromTo(h.current,{scale:0,opacity:0},{scale:1,opacity:1,duration:2.6,ease:"elastic.out(1, 0.38)"}),n.fromTo(v.current,{y:100,opacity:0,scale:.8},{y:0,opacity:1,scale:1,duration:1.6,ease:"elastic.out(0.9, 0.6)"},"-=1.8"),n.from(u.current,{x:-80,opacity:0,duration:1.2,stagger:.5,ease:"elastic.out(0.9, 0.3)"},"-=1.0"),n.from(p.current,{opacity:0,duration:1.4,ease:"power2.out"},"-=0.4"),c.forEach(S),f()&&(T(),n.play());const m=()=>{f()?j():C()};return document.addEventListener("visibilitychange",m),()=>{document.removeEventListener("visibilitychange",m),F(),e.revert()}},[o,F,N,S,E,f,T,C,j]),t.useEffect(()=>{o?f()&&j():F()},[o,F,j,f]),r.jsxs("footer",{id:R,className:l.Footer,children:[r.jsx("div",{ref:h,className:l.Footer__stars,"aria-hidden":"true"}),r.jsxs("div",{className:l.Footer__container,children:[r.jsx("div",{className:l.Footer__left,children:r.jsx("div",{ref:v,className:l.Footer__logo,children:r.jsx("picture",{children:r.jsx("img",{src:te,loading:"lazy",alt:"TamTam",width:"120",height:"40"})})})}),r.jsxs("div",{className:l.Footer__right,children:[r.jsx("div",{className:l.Footer__links,children:r.jsx("nav",{"aria-label":"Основная навигация",children:r.jsx("ul",{children:[{title:"Персонажи",href:"#slider"},{title:"Игры",href:"#carousel"},{title:"Наши каналы",href:"#channels"},{title:"Новости",href:"#news"}].map(({title:e,href:d},c)=>r.jsx("li",{ref:n=>u.current[c]=n,className:`${l.Footer__link}`,children:r.jsx("a",{href:d,onClick:I,"aria-label":`Перейти к разделу "${e}"`,children:e})},c))})})}),r.jsxs("div",{ref:p,className:l.Footer__contacts,children:[r.jsxs("div",{className:l.Footer__contact,children:["Адрес:",r.jsx("br",{}),r.jsx("a",{href:"https://yandex.ru/maps/-/CLWBj4or",target:"_blank",rel:"noopener noreferrer","aria-label":"Открыть адрес на карте Яндекса",children:"125124, г. Москва, 3-я улица Ямского поля, д. 20, стр. 1"})]}),r.jsx("br",{}),r.jsxs("div",{className:l.Footer__privacy,children:[r.jsx(H,{to:"/information","aria-label":"Политика конфиденциальности",children:"Политика конфиденциальности"})," ",r.jsx("a",{className:l.Footer__laba,href:"https://laba-laba.ru/",target:"_blank",rel:"noopener noreferrer","aria-label":"Сайт компании LABA",children:"© LABA"})]})]})]})]})]})}export{ae as F,se as N,z as u};
