import{r as a,j as t,H as F}from"./vendor-DZmJNg1k.js";import{u as Y}from"./carousel-C81yIPGJ.js";import{u as H,F as O}from"./footer-i7D45skc.js";import{L as C}from"./loader-BUzYiErM.js";import{I as M}from"./intro-5OJfo7BA.js";import{S as N}from"./slidercharacters-C2EObCAT.js";import{A as P}from"./appstoresfirst-B-bBgnUk.js";import{A as z}from"./framer-motion-CmhHeUY5.js";import"./header-BRuP5JTs.js";import"./ui-DrpiwpA4.js";function Z(){const L=a.useRef(null),m=a.useRef([]),S=a.useRef(0),i=a.useRef(!1),u=a.useRef(!1),g=a.useRef(!0),p=a.useRef(0),{setCurrentSection:b,currentSection:h,sectionConfig:j,setIsIntroSection:w}=Y(),{scrollToSection:y}=H(),l=[{component:M,id:"intro"},{component:N,id:"slider"},{component:P,id:"storesFirst"},{component:O,id:"footer"}];return a.useEffect(()=>{if(window.location.hash){const r=window.location.hash.substring(1);setTimeout(()=>{y(r)},1e3)}const n=()=>{if(window.location.hash){const r=window.location.hash.substring(1);y(r)}};return window.addEventListener("hashchange",n),()=>{window.removeEventListener("hashchange",n)}},[y]),a.useEffect(()=>{var D;const n=L.current,r=j.intro,T=(D=r==null?void 0:r.scrollLockDuration)!=null?D:1500,x=setTimeout(()=>{g.current=!1},T),d=e=>{var f,v;if(e<0||e>=l.length){i.current=!1,u.current=!1;return}const o=m.current[e],c=l[e].id,s=j[c];if(!o){i.current=!1,u.current=!1;return}if(!i.current){i.current=!0,u.current=!0;try{o.scrollIntoView({behavior:"smooth"}),b(c),w(c==="intro");const E=(f=s==null?void 0:s.scrollLockDuration)!=null?f:1500;((v=s==null?void 0:s.shouldLockScroll)!=null?v:!0)&&E>0?setTimeout(()=>{i.current=!1,u.current=!1},E):(i.current=!1,u.current=!1)}catch(E){i.current=!1,u.current=!1}}},I=new IntersectionObserver(e=>{e.forEach(o=>{if(o.isIntersecting&&!i.current){const c=m.current.indexOf(o.target);c!==-1&&(b(l[c].id),w(l[c].id==="intro"))}})},{root:n,threshold:.8});m.current.forEach((e,o)=>{e&&I.observe(e)});const k=e=>{e.preventDefault();const o=Date.now();if(g.current||i.current||u.current||o-p.current<300)return;u.current=!0;const c=e.deltaY>0?1:-1,s=l.findIndex(f=>f.id===h);d(s+c),p.current=o},R=e=>{S.current=e.touches[0].clientY},A=e=>{e.preventDefault();const o=Date.now();if(g.current||i.current||o-p.current<300)return;const c=e.touches[0].clientY,s=S.current-c;if(Math.abs(s)>50){const f=l.findIndex(v=>v.id===h);s>0?d(f+1):s<0&&d(f-1),p.current=o}};return n.addEventListener("wheel",k,{passive:!1}),n.addEventListener("touchstart",R,{passive:!1}),n.addEventListener("touchmove",A,{passive:!1}),()=>{clearTimeout(x),n.removeEventListener("wheel",k),n.removeEventListener("touchstart",R),n.removeEventListener("touchmove",A),m.current.forEach(e=>{e&&I.unobserve(e)})}},[b,h,w]),t.jsxs(t.Fragment,{children:[t.jsxs(F,{children:[t.jsx("title",{children:"Тамагочи"}),t.jsx("meta",{name:"description",content:"TamTam Мой милый питомец"}),t.jsx("meta",{name:"keywords",content:"Книга Перемен, И-Цзин, гадание онлайн, гексаграммы, китайская философия, канон перемен"}),t.jsx("meta",{property:"og:title",content:"TamTam Мой милый питомец"}),t.jsx("meta",{property:"og:description",content:"TamTam Мой милый питомец"}),t.jsx("meta",{property:"og:url",content:"https://xenabit.github.io/tam-tam-prod/"}),t.jsx("script",{type:"application/ld+json",children:JSON.stringify({"@context":"https://schema.org","@type":"WebPage",name:"TamTam Мой милый питомец",description:"TamTam Мой милый питомец",url:"https://xenabit.github.io/tam-tam-prod/",image:"/preview-image.jpg",publisher:{"@type":"Organization",name:"LABA",logo:{"@type":"ImageObject",url:"https://xenabit.github.io/tam-tam-prod/logo-laba.svg"}}})}),t.jsx("meta",{httpEquiv:"Content-Security-Policy",content:"default-src 'self'; img-src 'self' https://iching.laba-laba.ru https://mc.yandex.ru data:; script-src 'self' https://mc.yandex.ru 'sha256-GylAe+ymyzx4MREH3q81FRQ39P6rjlCCFoz0YjMxgVc='; style-src 'self' 'unsafe-inline'; font-src 'self' data:; connect-src 'self' https://mc.yandex.ru https://api.yourdomain.com; frame-src 'self' https://mc.yandex.ru;"})]}),t.jsx("main",{children:t.jsx("div",{className:"scroll-container",ref:L,children:t.jsx(a.Suspense,{fallback:t.jsx(C,{}),children:t.jsx(z,{children:l.map(({component:n,id:r},T)=>{var x;return t.jsx("section",{className:"section",tabIndex:0,ref:d=>m.current[T]=d,style:{backgroundColor:((x=j[r])==null?void 0:x.background)||"#ffffff"},children:t.jsx(n,{id:r,isActive:h===r},`${r}-${h}`)},r)})})})})})]})}export{Z as default};
