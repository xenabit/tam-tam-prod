import{r as a,j as c,g as w,M as V}from"./vendor-Czmxryr-.js";import{u as X}from"./appstoresfirst-DfM07GiT.js";const Y={intro:{background:"#5B71C1",fill:"#5B71C1",outline:"#FCCD67",scrollLockDuration:2e3},slider:{background:"#39C883",fill:"#2EA56C",outline:"#FCCD67",scrollLockDuration:1500},storesFirst:{background:"#EA437B",fill:"#C41650",outline:"#F49CBA",scrollLockDuration:2e3},carousel:{background:"#39C883",fill:"#2EA56C",outline:"#FCCD67",scrollLockDuration:8e3},channels:{background:"#5B71C1",fill:"#5B71C1",outline:"#FCCD67",scrollLockDuration:6e3},storesSecond:{background:"#39C883",fill:"#2EA56C",outline:"#FCCD67",scrollLockDuration:2e3},news:{background:"#EA437B",fill:"#C41650",outline:"#F49CBA",scrollLockDuration:4e3},footer:{background:"#5B71C1",fill:"#5B71C1",outline:"#FCCD67",scrollLockDuration:6e3}},J=a.createContext();function qe({children:C}){const[u,r]=a.useState("intro"),[x,d]=a.useState(!0),[k,i]=a.useState(0),[v,f]=a.useState(0),[y,h]=a.useState(0),g=a.useRef(!1),p=a.useCallback(l=>{i(l)},[]),S=a.useCallback(l=>{f(l)},[]),F=a.useCallback(()=>{g.current||(g.current=!0,h(l=>l+1),setTimeout(()=>{g.current=!1},300))},[]),_={currentSection:u,setCurrentSection:l=>{r(l),d(l==="intro")},sectionConfig:Y,isIntroSection:x,setIsIntroSection:d,carouselSlide:k,updateCarouselSlide:p,sliderSlide:v,updateSliderSlide:S,animalChangeCount:y,triggerAnimalChange:F};return c.jsx(J.Provider,{value:_,children:C})}const K=()=>a.useContext(J),Z="/assets/images/pet-1.png",ee="/assets/images/pet-1.avif",te="/assets/images/pet-1.webp",se="/assets/images/pet-2.png",re="/assets/images/pet-2.avif",ae="/assets/images/pet-2.webp",ie="/assets/images/pet-3.png",oe="/assets/images/pet-3.avif",ne="/assets/images/pet-3.webp",G="/assets/images/carousel-intro-1.png",ce="/assets/images/carousel-intro-1.avif",H="/assets/images/carousel-intro-2.png",ue="/assets/images/carousel-intro-2.avif",le="/assets/images/carousel-text.svg",me="/assets/images/carousel-text-mob.svg",de="/assets/images/carouse-1.png",pe="/assets/images/carouse-1.avif",fe="/assets/images/carouse-1.webp",ge="/assets/images/carouse-2.png",be="/assets/images/carouse-2.avif",Ce="/assets/images/carouse-2.webp",xe="/assets/images/carouse-3.png",ye="/assets/images/carouse-3.avif",_e="/assets/images/carouse-3.webp",ve="/assets/images/carouse-4.png",he="/assets/images/carouse-4.avif",we="/assets/images/carouse-4.webp",ke="/assets/images/carouse-5.png",Se="/assets/images/carouse-5.avif",Fe="/assets/images/carouse-5.webp",Be="/assets/images/carouse-6.png",Ae="/assets/images/carouse-6.avif",je="/assets/images/carouse-6.webp",De="/assets/images/carouse-7.png",Ee="/assets/images/carouse-7.avif",Re="/assets/images/carouse-7.webp";function Ie({id:C,isActive:u}){const r=X(),x=a.useRef(null),d=a.useRef(null),k=a.useRef(null),i=a.useRef([]),v=a.useRef([]),f=a.useRef(null),y=a.useRef(null),h=a.useRef(null),g=a.useRef(null),[p,S]=a.useState(!1),[F,D]=a.useState(!1),{updateCarouselSlide:_}=K(),[l,Me]=a.useState(0);a.useEffect(()=>()=>{u||(_(0),S(!1),D(!1))},[u,_]);const E=a.useMemo(()=>[{picture:{img:G,avif:ce,webp:G},title:"Пшеница"},{picture:{img:H,avif:ue,webp:H},title:"Тортик"}],[]),R=a.useMemo(()=>[{title:"Люби",icon:{img:de,avif:pe,webp:fe}},{title:"Играй",icon:{img:ge,avif:be,webp:Ce}},{title:"Ухаживай",icon:{img:xe,avif:ye,webp:_e}},{title:"Наряжай",icon:{img:ve,avif:he,webp:we}},{title:"Корми",icon:{img:ke,avif:Se,webp:Fe}},{title:"Заботься",icon:{img:Be,avif:Ae,webp:je}},{title:"Веселись",icon:{img:De,avif:Ee,webp:Re}}],[]),T=a.useMemo(()=>[{x:r?"-352%":"-259%",y:"-214%",width:r?"5.5rem":"9.3vw",isSpecial:!1},{x:"-311%",y:"-81%",width:r?"6rem":"10vw",isSpecial:!1},{x:"-214%",y:"43%",width:r?"6.5rem":"11vw",isSpecial:!1},{x:"-50%",y:"74%",width:r?"7rem":"12vw",isSpecial:!0,background:"#2ea56c",borderColor:"#80dcb0",scaleImg:1.5,scaleTitle:r?"1.222":"1.333"},{x:"110%",y:"41%",width:r?"6.5rem":"11vw",isSpecial:!1},{x:"212%",y:"-82%",width:r?"6rem":"10vw",isSpecial:!1},{x:r?"253%":"157%",y:"-217%",width:r?"5.5rem":"9.3vw",isSpecial:!1,isAround:!0}],[]),m=a.useMemo(()=>[{pet:{img:ie,avif:oe,webp:ne,alt:"TamTam Котёнок"},background:"#39C883",fill:"#2EA56C",outline:"#FCCD67",borderBack:"#FFFFFFA3",borderMain:"#80DCB0",iconBack:"#82CAA7",iconMain:"#2EA56C",specialBackground:"#2ea56c",specialBorder:"#80dcb0"},{pet:{img:se,avif:re,webp:ae,alt:"TamTam Ягнёнок"},background:"#EA437B",fill:"#C41650",outline:"#F49CBA",borderBack:"#FFFFFFA3",borderMain:"#F49CBA",iconBack:"#DD89A6",iconMain:"#C41650",specialBackground:"#C41650",specialBorder:"#F49CBA"},{pet:{img:Z,avif:ee,webp:te,alt:"TamTam Щенок"},background:"#FFBE2D",fill:"#FFBE2D",outline:"#FFD881",borderBack:"#FFFFFFA3",borderMain:"#FFE6AF",iconBack:"#FFD983",iconMain:"#FFBE2D",specialBackground:"#FFBE2D",specialBorder:"#FFE6AF"}],[]);typeof window!="undefined"&&w.registerPlugin(V);const N=a.useCallback(()=>{if(!x.current)return;const s=w.context(()=>{const e=w.timeline({onComplete:()=>{S(!0),D(!0)}});if(d.current&&e.fromTo(d.current,{scale:0},{scale:1,duration:1.5,ease:"elastic.out(0.9, 0.6)"},1),v.current.forEach((t,o)=>{!t||!E[o]||e.to(t,{x:0,y:0,duration:1.5,ease:"ease"},.5)}),d.current&&e.to(d.current,{top:"-100%",duration:1,ease:"linear"},2.7),v.current.forEach(t=>{t&&e.to(t,{top:"-100%",duration:1,ease:"linear"},2.7)}),e.to(y.current,{scale:1,duration:1,ease:"elastic.out(0.9, 0.6)"},4),i.current[0]&&e.set(i.current[0],{x:"-50%",y:"74%",width:r?"7rem":"12vw"},4),i.current[1]&&e.set(i.current[1],{x:"110%",y:"41%",width:r?"6.5rem":"11vw"},4),i.current[2]&&e.set(i.current[2],{x:"212%",y:"-82%",width:r?"6rem":"10vw"},4),i.current[3]&&e.set(i.current[3],{x:r?"253%":"157%",y:"-217%",width:r?"5.5rem":"9.3vw"},4),i.current[4]&&e.set(i.current[4],{x:r?"-352%":"-259%",y:"-214%",width:r?"5.5rem":"9.3vw"},4),i.current[5]&&e.set(i.current[5],{x:"-311%",y:"-81%",width:r?"6rem":"10vw"},4),i.current[6]&&e.set(i.current[6],{x:"-214%",y:"43%",width:r?"6.5rem":"11vw"},4),e.to(k.current,{opacity:1,duration:.6,ease:"none"},4.2),i.current[0]&&e.to(i.current[0],{duration:1.2,ease:"linear",motionPath:{path:[{x:"-50%",y:"74%"},{x:"-214%",y:"43%"},{x:"-311%",y:"-81%"},{x:r?"-352%":"-259%",y:"-214%"}],curviness:1.2,type:"soft"},width:r?"5.5rem":"9.3vw"},4.2),i.current[1]&&e.to(i.current[1],{duration:1.2,ease:"linear",motionPath:{path:[{x:"110%",y:"41%"},{x:"-50%",y:"74%"},{x:"-214%",y:"43%"},{x:"-311%",y:"-81%"}],curviness:1.2,type:"soft"},width:r?"6rem":"10vw"},4.2),i.current[2]&&e.to(i.current[2],{duration:1.2,ease:"linear",motionPath:{path:[{x:"212%",y:"-82%"},{x:"110%",y:"41%"},{x:"-50%",y:"74%"},{x:"-214%",y:"43%"}],curviness:1.2,type:"soft"},width:r?"6.5rem":"11vw"},4.2),i.current[3]&&e.to(i.current[3],{duration:1.2,ease:"linear",motionPath:{path:[{x:r?"253%":"157%",y:"-217%"},{x:"212%",y:"-82%"},{x:"110%",y:"41%"},{x:"-50%",y:"74%"}],curviness:1.2,type:"soft"},width:r?"7rem":"12vw"},4.2),i.current[4]&&e.to(i.current[4],{duration:1.2,ease:"linear",motionPath:{path:[{x:r?"-352%":"-259%",y:"-214%"},{x:"-50%",y:r?"-350%":"-284%"},{x:r?"253%":"157%",y:"-217%"},{x:"212%",y:"-82%"},{x:"110%",y:"41%"}],curviness:1.5,type:"soft"},width:r?"6.5rem":"11vw"},4.2),i.current[5]&&e.to(i.current[5],{duration:1.2,ease:"linear",motionPath:{path:[{x:"-311%",y:"-81%"},{x:r?"-352%":"-259%",y:"-214%"},{x:"-50%",y:r?"-350%":"-284%"},{x:r?"253%":"157%",y:"-217%"},{x:"212%",y:"-82%"}],curviness:1.5,type:"soft"},width:r?"6rem":"10vw"},4.2),i.current[6]&&e.to(i.current[6],{duration:1.2,ease:"linear",motionPath:{path:[{x:"-214%",y:"43%"},{x:"-311%",y:"-81%"},{x:r?"-352%":"-259%",y:"-214%"},{x:"-50%",y:r?"-350%":"-284%"},{x:r?"253%":"157%",y:"-217%"}],curviness:1.5,type:"soft"},width:r?"5.5rem":"9.3vw"},4.2),i.current[3]){const t=i.current[3].querySelector(".Carousel__icon"),o=t==null?void 0:t.querySelector("img"),n=i.current[3].querySelector(".Carousel__title");t&&(e.to(t,{backgroundColor:"#2ea56c",borderColor:"#80dcb0",duration:1,ease:"power2.inOut"},5.5),o&&e.to(o,{scale:1.5,duration:1,ease:"power2.inOut"},5.5)),n&&e.to(n,{scale:r?"1.2":"1.3334",duration:1,ease:"power2.inOut"},5.5)}g.current=e},x);return()=>s.revert()},[E]);a.useEffect(()=>(u&&!p&&N(),()=>{g.current&&g.current.kill()}),[u,p,N]);const q=a.useCallback((s,e,t)=>{t.to(s,{duration:1.5,ease:"power2.inOut",motionPath:{path:[{x:"-50%",y:r?"-350%":"-284%"},{x:e.x,y:e.y}],curviness:1.5,type:"soft"},width:e.width},0)},[]),L=a.useCallback((s,e,t)=>{t.to(s,{duration:1.5,ease:"power2.inOut",x:e.x,y:e.y,width:e.width},0)},[]),O=a.useCallback((s,e,t,o)=>{const n={duration:1.5,ease:"power2.inOut"};e.isSpecial?(n.backgroundColor=t.specialBackground,n.borderColor=t.specialBorder):(n.backgroundColor=t.iconBack,n.borderColor=t.borderBack),o.to(s,n,0)},[]),P=a.useCallback((s,e,t)=>{t.to(s,{duration:1.5,ease:"power2.inOut",scale:e.isSpecial?e.scaleImg||1.5:1},0)},[]),$=a.useCallback((s,e,t)=>{t.to(s,{duration:1.5,ease:"power2.inOut",scale:e.isSpecial?e.scaleTitle||"1.2":r?"1.1":"1.2"},0)},[]),z=a.useCallback((s,e,t,o)=>{if(!s)return;const n=s.querySelector(".Carousel__icon"),b=n==null?void 0:n.querySelector("img"),j=s.querySelector(".Carousel__title");e.isAround?q(s,e,o):L(s,e,o),n&&(O(n,e,t,o),b&&P(b,e,o)),j&&$(j,e,o)},[q,L,O,P,$]),B=a.useCallback(()=>{const s=Array(7);for(let e=0;e<7;e++)s[e]={item:R[e],position:T[e]};return s},[R,T]),I=a.useCallback(s=>{if(!s)return B();const e=Array(7),t=s[6];for(let o=6;o>0;o--)e[o]=s[o-1];return e[0]=t,e},[B]),A=a.useCallback(s=>m[s%m.length],[m]),W=a.useCallback((s,e,t)=>{if(!h.current)return;const o=A(t-1),n=h.current;n.style.setProperty("--bg-color-current",o.background),n.style.setProperty("--bg-color-next",s.background),e.fromTo(n,{"--bg-progress":"0%",background:"linear-gradient(to left, var(--bg-color-next) 0%, var(--bg-color-next) 0%, var(--bg-color-current) 0%, var(--bg-color-current) 100%)"},{"--bg-progress":"100%",duration:1,ease:"power2.inOut",background:"linear-gradient(to left, var(--bg-color-next) 0%, var(--bg-color-next) var(--bg-progress), var(--bg-color-current) var(--bg-progress), var(--bg-color-current) 100%)",onComplete:()=>{n.style.background=s.background,n.style.setProperty("--bg-color-current",s.background)}},0)},[A]),U=a.useCallback((s,e)=>{if(!y.current)return;const t=y.current.querySelector(".Carousel__picture"),o=t==null?void 0:t.querySelector("img"),n=t==null?void 0:t.querySelector('source[type="image/avif"]'),b=t==null?void 0:t.querySelector('source[type="image/webp"]');!t||!o||(e.to(t,{duration:.5,ease:"power2.in",opacity:0,scale:.8,y:20},.2),e.add(()=>{n&&n.setAttribute("srcset",s.pet.avif),b&&b.setAttribute("srcset",s.pet.webp),o.setAttribute("src",s.pet.img),o.setAttribute("alt",s.pet.alt)},.7),e.to(t,{duration:1,ease:"elastic.out(0.9, 0.5)",opacity:1,scale:1,y:0},.7))},[]),M=a.useCallback((s,e)=>{if(!s||!i.current.length)return;f.current&&f.current.kill();const t=w.context(()=>{const o=w.timeline(),n=A(e);W(n,o,e),U(n,o),s.forEach(({position:b},j)=>{const Q=i.current[j];z(Q,b,n,o)}),f.current=o},x);return _(e%m.length),()=>t.revert()},[A,W,U,z,_,m.length]);return a.useEffect(()=>{if(!u||!p||!F)return;let s=B(),e=0;const t=setTimeout(()=>{const n=I(s);M(n,e+1),s=n,e++},500),o=setInterval(()=>{const n=I(s);M(n,e+1),s=n,e++},3500);return()=>{clearTimeout(t),clearInterval(o),f.current&&f.current.kill()}},[u,p,F,B,I,M]),c.jsxs("div",{id:C,ref:x,className:"Carousel",role:"region","aria-label":"Карусель ухода за питомцем",children:[c.jsx("div",{ref:h,className:"Carousel__background","aria-hidden":"true"}),c.jsxs("div",{className:"Carousel__container",children:[c.jsxs("div",{className:"Carousel__intro","aria-hidden":p,children:[c.jsx("div",{ref:d,className:"Carousel__text",children:c.jsx("img",{src:r?me:le,width:"970",height:"296",alt:"Как заботиться о питомце?",loading:"lazy",decoding:"async"})}),c.jsx("ul",{className:"Carousel__elements",children:E.map(({picture:s,title:e},t)=>c.jsx("li",{ref:o=>v.current[t]=o,className:`Carousel__element Carousel__element_${t+1}`,"aria-hidden":"true",children:c.jsxs("picture",{children:[c.jsx("source",{type:"image/avif",srcSet:s.avif}),c.jsx("source",{type:"image/webp",srcSet:s.webp}),c.jsx("img",{src:s.img,width:"581",height:"598",alt:e,loading:"lazy",decoding:"async"})]})},`intro_${t}`))})]}),c.jsxs("div",{className:"Carousel__carousel","aria-hidden":!p,children:[c.jsx("div",{ref:y,className:"Carousel__character",children:c.jsx("div",{className:"Carousel__picture",children:c.jsxs("picture",{children:[c.jsx("source",{type:"image/avif",srcSet:m[0].pet.avif}),c.jsx("source",{type:"image/webp",srcSet:m[0].pet.webp}),c.jsx("img",{src:m[0].pet.img,width:"447",height:"564",alt:m[0].pet.alt,loading:"lazy",decoding:"async"})]})})}),c.jsx("ul",{ref:k,className:"Carousel__items",role:"list","aria-label":"Способы ухода за питомцем",children:R.map(({title:s,icon:e},t)=>c.jsxs("li",{ref:o=>i.current[t]=o,className:`Carousel__item Carousel__item_${t+1}`,role:"listitem","aria-label":s,children:[c.jsx("div",{className:"Carousel__icon",children:c.jsxs("picture",{children:[c.jsx("source",{type:"image/avif",srcSet:e.avif}),c.jsx("source",{type:"image/webp",srcSet:e.webp}),c.jsx("img",{src:e.img,width:"395",height:"395",alt:"",loading:"lazy",decoding:"async","aria-hidden":"true"})]})}),c.jsx("div",{className:"Carousel__title",children:s})]},`item_${t}`))})]})]})]})}function Le({id:C,isActive:u}){const{currentSection:r}=K();return c.jsx(Ie,{id:C,isActive:u},`${C}-${r}`)}export{Le as C,qe as S,ee as a,Z as b,ne as c,oe as d,ie as e,ae as f,re as g,se as h,te as p,K as u};
