import{r as t,j as n,u as V,a as W,g as L,L as H}from"./vendor-Czmxryr-.js";import{u as q}from"./appstoresfirst-TwJh1ZBW.js";const M=t.createContext();function se({children:R}){const o=t.useCallback((u,p=1500)=>{if(!document.getElementById(u))return console.warn(`Секция с id "${u}" не найдена`),!1;const a=["intro","slider","storesFirst","carousel","channels","storesSecond","news","footer"].indexOf(u);if(a===-1)return!1;const _=document.querySelector(".scroll-container");if(!_)return!1;const i=_.querySelectorAll(".section");if(!i[a])return!1;const y=new IntersectionObserver(v=>{v.forEach(b=>{if(b.isIntersecting){const I=new CustomEvent("sectionChange",{detail:{sectionId:u}});window.dispatchEvent(I)}})},{root:_,threshold:.8});return y.observe(i[a]),i[a].scrollIntoView({behavior:"smooth",block:"start"}),setTimeout(()=>{y.disconnect()},p),window.history.pushState(null,"",`#${u}`),!0},[]),h=t.useCallback((u,p,g)=>{u.preventDefault();const s=u.currentTarget.getAttribute("href");if(!s||!s.startsWith("#"))return;const a=s.substring(1);if(g.pathname!=="/tam-tam-prod/"){p(`/#${a}`),setTimeout(()=>{o(a)},100);return}o(a)},[o]),j={scrollToSection:o,handleNavigation:h};return n.jsx(M.Provider,{value:j,children:R})}const z=()=>t.useContext(M),X="_Footer_1hdjw_2",D="_Footer__container_1hdjw_15",U="_Footer__right_1hdjw_23",Y="_Footer__left_1hdjw_28",G="_Footer__links_1hdjw_31",J="_Footer__contacts_1hdjw_41",K="_Footer__laba_1hdjw_49",Q="_Footer__stars_1hdjw_52",Z="_Footer__link_1hdjw_31",l={Footer:X,Footer__container:D,Footer__right:U,Footer__left:Y,Footer__links:G,Footer__contacts:J,Footer__laba:K,Footer__stars:Q,Footer__link:Z},ee="/tam-tam-prod/assets/images/star.svg",te="/tam-tam-prod/assets/images/header-logo.svg";function ae({id:R,isActive:o}){const h=t.useRef(null),j=t.useRef(null),u=t.useRef([]),p=t.useRef(null),{handleNavigation:g}=z(),s=t.useRef(null);t.useRef(0);const a=t.useRef([]),_=t.useRef([]),i=t.useRef(null),y=V(),v=W(),b=q(),I=t.useCallback(e=>{g(e,y,v)},[g,y,v]),$=(()=>{if(b)return 8;const e=window.innerWidth*window.innerHeight;return e<12e5?18:e<2e6?24:30})(),O=[{x:20,y:25},{x:0,y:-25},{x:0,y:35},{x:-44,y:-42},{x:44,y:-42},{x:-48,y:0},{x:48,y:0},{x:-30,y:-32},{x:30,y:-32},{x:-30,y:30},{x:30,y:30},{x:-8,y:-4},{x:0,y:20},{x:-300,y:-200},{x:300,y:-200},{x:-300,y:200},{x:300,y:200},{x:-350,y:-100},{x:350,y:-100}].slice(0,$),k=t.useCallback(()=>{i.current&&i.current.pause(),_.current.forEach(e=>{e&&e.pause&&e.pause()}),s.current&&(cancelAnimationFrame(s.current),s.current=null)},[]),w=t.useCallback(()=>{i.current&&i.current.play(),_.current.forEach(e=>{e&&e.play&&e.play()}),o&&T()},[o]),F=t.useCallback(()=>{k(),i.current&&(i.current.kill(),i.current=null),_.current.forEach(e=>{e&&e.kill&&e.kill()}),_.current=[],!o&&h.current&&(h.current.innerHTML="",a.current=[])},[o,k]),f=t.useCallback(()=>document.visibilityState==="visible",[]),C=t.useCallback((e,d,c)=>{const r=new Image;return r.src=ee,r.alt="",r.loading="eager",r.decoding="async",Object.assign(r.style,{position:"absolute",left:`${50+e}%`,top:`${50+d}%`,transform:`translate(-50%, -50%) scale(${c})`,willChange:"transform",contain:"strict",backfaceVisibility:"hidden",pointerEvents:"none",userSelect:"none",zIndex:-1}),h.current.appendChild(r),a.current.push(r),r},[]),N=t.useCallback(e=>{const d=Math.random()*4+7,c=L.to(e,{left:"50%",top:"50%",scale:0,duration:d,ease:"linear",onComplete:()=>{const r=a.current.indexOf(e);r>-1&&a.current.splice(r,1);const m=_.current.indexOf(c);m>-1&&_.current.splice(m,1),e.remove()}});return _.current.push(c),c},[]),P=b?400:160,A=b?25:80,E=t.useCallback(()=>{if(!f()||!o||a.current.length>=A)return;const e=(S,B)=>Math.random()*(B-S)+S,d=e(0,Math.PI*2),c=e(70,100),r=Math.cos(d)*c,m=Math.sin(d)*c,x=C(r,m,e(.4,.8));N(x)},[o,C,N,f]),T=t.useCallback(()=>{if(!f()||!o||s.current)return;const e=()=>{if(!f()||!o){clearInterval(s.current),s.current=null;return}E()};s.current&&clearInterval(s.current),s.current=setInterval(e,P)},[o,E,f]);return t.useEffect(()=>{if(!o){F();return}const e=L.context(()=>{},h),d=(x,S)=>Math.random()*(S-x)+x,c=O.map(x=>C(x.x,x.y,d(.4,1))),r=L.timeline({defaults:{ease:"linear"},paused:!f()});i.current=r,r.fromTo(h.current,{scale:0,opacity:0},{scale:1,opacity:1,duration:2.6,ease:"elastic.out(1, 0.38)"}),r.fromTo(j.current,{y:100,opacity:0,scale:.8},{y:0,opacity:1,scale:1,duration:1.6,ease:"elastic.out(0.9, 0.6)"},"-=1.8"),r.from(u.current,{x:-80,opacity:0,duration:1.2,stagger:.5,ease:"elastic.out(0.9, 0.3)"},"-=1.0"),r.from(p.current,{opacity:0,duration:1.4,ease:"power2.out"},"-=0.4"),c.forEach(N),f()&&(T(),r.play());const m=()=>{f()?w():k()};return document.addEventListener("visibilitychange",m),()=>{document.removeEventListener("visibilitychange",m),F(),e.revert()}},[o,F,C,N,E,f,T,k,w]),t.useEffect(()=>{o?f()&&w():F()},[o,F,w,f]),n.jsxs("footer",{id:R,className:l.Footer,children:[n.jsx("div",{ref:h,className:l.Footer__stars,"aria-hidden":"true"}),n.jsxs("div",{className:l.Footer__container,children:[n.jsx("div",{className:l.Footer__left,children:n.jsx("div",{ref:j,className:l.Footer__logo,children:n.jsx("picture",{children:n.jsx("img",{src:te,loading:"lazy",alt:"TamTam",width:"120",height:"40"})})})}),n.jsxs("div",{className:l.Footer__right,children:[n.jsx("div",{className:l.Footer__links,children:n.jsx("nav",{"aria-label":"Основная навигация",children:n.jsx("ul",{children:[{title:"Персонажи",href:"#slider"},{title:"Игры",href:"#carousel"},{title:"Наши каналы",href:"#channels"},{title:"Новости",href:"#news"}].map(({title:e,href:d},c)=>n.jsx("li",{ref:r=>u.current[c]=r,className:`${l.Footer__link}`,children:n.jsx("a",{href:d,onClick:I,"aria-label":`Перейти к разделу "${e}"`,children:e})},c))})})}),n.jsxs("div",{ref:p,className:l.Footer__contacts,children:[n.jsxs("div",{className:l.Footer__contact,children:["Адрес:",n.jsx("br",{}),n.jsx("a",{href:"https://yandex.ru/maps/-/CLWBj4or",target:"_blank",rel:"noopener noreferrer","aria-label":"Открыть адрес на карте Яндекса",children:"125124, г. Москва, 3-я улица Ямского поля, д. 20, стр. 1"})]}),n.jsx("br",{}),n.jsxs("div",{className:l.Footer__privacy,children:[n.jsx(H,{to:"/information","aria-label":"Политика конфиденциальности",children:"Политика конфиденциальности"})," ",n.jsx("a",{className:l.Footer__laba,href:"https://laba-laba.ru/",target:"_blank",rel:"noopener noreferrer","aria-label":"Сайт компании LABA",children:"© LABA"})]})]})]})]})]})}export{ae as F,se as N,z as u};
