import{r as n,j as e,u as V,a as X,g as o,L as D}from"./vendor-Czmxryr-.js";import{u as K}from"./appstoresfirst-CXhrKgcP.js";const W=n.createContext();function le({children:C}){const d=n.useCallback((r,p=1500)=>{if(!document.getElementById(r))return console.warn(`Секция с id "${r}" не найдена`),!1;const l=["intro","slider","storesFirst","carousel","channels","storesSecond","news","footer"].indexOf(r);if(l===-1)return!1;const v=document.querySelector(".scroll-container");if(!v)return!1;const y=v.querySelectorAll(".section");if(!y[l])return!1;const b=new IntersectionObserver(j=>{j.forEach(f=>{if(f.isIntersecting){const I=new CustomEvent("sectionChange",{detail:{sectionId:r}});window.dispatchEvent(I)}})},{root:v,threshold:.8});return b.observe(y[l]),y[l].scrollIntoView({behavior:"smooth",block:"start"}),setTimeout(()=>{b.disconnect()},p),window.history.pushState(null,"",`#${r}`),!0},[]),x=n.useCallback((r,p,k)=>{r.preventDefault();const g=r.currentTarget.getAttribute("href");if(!g||!g.startsWith("#"))return;const l=g.substring(1);if(k.pathname!=="/tam-tam-prod/"){p(`/#${l}`),setTimeout(()=>{d(l)},100);return}d(l)},[d]),u={scrollToSection:d,handleNavigation:x};return e.jsx(W.Provider,{value:u,children:C})}const Z=()=>n.useContext(W),G="_Footer_1965z_2",J="_Footer__container_1965z_15",Q="_Footer__right_1965z_23",Y="_Footer__left_1965z_28",ee="_Footer__links_1965z_31",te="_Footer__contacts_1965z_41",oe="_Footer__laba_1965z_49",re="_Footer__stars_1965z_52",se="_Footer__link_1965z_31",i={Footer:G,Footer__container:J,Footer__right:Q,Footer__left:Y,Footer__links:ee,Footer__contacts:te,Footer__laba:oe,Footer__stars:re,Footer__link:se},ne="/tam-tam-prod/assets/images/star.svg",ae="/tam-tam-prod/assets/images/header-logo.svg";function ue({id:C,isActive:d}){const x=n.useRef(null),u=n.useRef([]),r=n.useRef(null),p=n.useRef(null),k=n.useRef(!1),g=n.useRef(null),l=n.useRef([]),v=n.useRef(null),{handleNavigation:y}=Z(),b=V(),j=X(),f=K(),I=n.useCallback(F=>{y(F,b,j)},[y,b,j]),q=f?5:14,B=f?900:600,T=f?28:42,H=f?14:16,U=f?24:28,M=f?100:300,z=[{x:-44,y:-42},{x:44,y:-42},{x:-48,y:0},{x:48,y:0},{x:-30,y:-32},{x:30,y:-32},{x:-30,y:30},{x:30,y:30},{x:42,y:42},{x:-8,y:-4},{x:8,y:-25},{x:0,y:46}],A=(F=!1,c=null)=>{if(!x.current||u.current.length>=T)return;const s=document.createElement("img");s.src=ne,s.alt="",s.loading="lazy",x.current.appendChild(s);let a,t,h,m;if(F&&c!==null&&z[c]){const _=z[c];a=_.x/100*window.innerWidth,t=_.y/100*window.innerHeight}else{const _=Math.hypot(window.innerWidth,window.innerHeight);h=o.utils.random(_*.6,_*1.3),m=o.utils.random(0,Math.PI*2),a=Math.cos(m)*h,t=Math.sin(m)*h}h=Math.sqrt(a*a+t*t),m=Math.atan2(t,a);const N=o.utils.random(.4,1.1),R=o.utils.random(.07,.24),w=o.utils.random(H,U);o.set(s,{x:a,y:t,scale:N,opacity:1,rotation:o.utils.random(-180,180),xPercent:-50,yPercent:-50}),u.current.push({el:s,birth:o.ticker.time,life:w,radius:h,angle:m,speed:R,scale:N})};return n.useEffect(()=>{const F=o.context(()=>{const c=o.timeline({defaults:{ease:"power3.out"},onComplete:()=>{k.current=!0}});c.fromTo(x.current,{scale:0,opacity:0},{scale:1,opacity:1,duration:2.6,ease:"elastic.out(1, 0.38)"}),c.fromTo(g.current,{y:100,opacity:0,scale:.8},{y:0,opacity:1,scale:1,duration:1.6,ease:"elastic.out(0.9, 0.6)"},"-=1.8"),c.from(l.current,{x:-80,opacity:0,duration:1.2,stagger:.5,ease:"elastic.out(0.9, 0.3)"},"-=1.0"),c.from(v.current,{opacity:0,duration:1.4,ease:"power2.out"},"-=0.4");for(let a=0;a<q;a++)A(!0,a);const s=()=>{const a=o.ticker.time;u.current=u.current.filter(t=>{var $;if(!(($=t.el)!=null&&$.parentNode))return!1;const h=a-t.birth,m=h/t.life;if(m>=1)return t.el.remove(),!1;const N=t.radius*(1-m),R=t.angle+h*t.speed;let w=Math.cos(R)*N,_=Math.sin(R)*N;const L=Math.sqrt(w*w+_*_);let P=t.scale,O=1,E=0;if(L<M){const S=1-L/M;P*=1-S*.9,O=1-S*.95,E=S*12}return o.set(t.el,{x:w,y:_,scale:P,opacity:O,filter:E>1?`drop-shadow(0 0 20px #ffbe2d) drop-shadow(0 0 80px #ffbe2d) blur(${E}px)`:"drop-shadow(0 0 20px #ffbe2d) drop-shadow(0 0 80px #ffbe2d)",rotation:`+=${t.speed*3}`}),!0})};o.ticker.add(s),r.current=s,p.current=setInterval(()=>{u.current.length<T-5&&A()},B)},x);return()=>{r.current&&o.ticker.remove(r.current),p.current&&clearInterval(p.current),u.current.forEach(c=>{var s;return(s=c.el)==null?void 0:s.remove()}),u.current=[],F.revert()}},[d]),n.useEffect(()=>{r.current&&(d?o.ticker.add(r.current):o.ticker.remove(r.current))},[d]),e.jsxs("footer",{id:C,className:i.Footer,children:[e.jsx("div",{ref:x,className:i.Footer__stars,"aria-hidden":"true"}),e.jsxs("div",{className:i.Footer__container,children:[e.jsx("div",{className:i.Footer__left,children:e.jsx("div",{ref:g,className:i.Footer__logo,children:e.jsx("picture",{children:e.jsx("img",{src:ae,loading:"lazy",alt:"TamTam"})})})}),e.jsxs("div",{className:i.Footer__right,children:[e.jsx("div",{className:i.Footer__links,children:e.jsx("nav",{children:e.jsx("ul",{children:[{title:"Персонажи",href:"#slider"},{title:"Игры",href:"#carousel"},{title:"Наши каналы",href:"#channels"},{title:"Новости",href:"#news"}].map(({title:F,href:c},s)=>e.jsx("li",{ref:a=>l.current[s]=a,className:`${i.Footer__link}`,children:e.jsx("a",{href:c,onClick:I,children:F})},s))})})}),e.jsxs("div",{ref:v,className:i.Footer__contacts,children:[e.jsxs("div",{className:i.Footer__contact,children:["Адрес:",e.jsx("br",{}),e.jsx("a",{href:"https://yandex.ru/maps/-/CLWBj4or",target:"_blank",rel:"noopener",children:"125124, г. Москва, 3-я улица Ямского поля, д. 20, стр. 1"})]}),e.jsx("br",{}),e.jsxs("div",{className:i.Footer__privacy,children:[e.jsx(D,{to:"/information",children:"Политика конфиденциальности"})," ",e.jsx("a",{className:i.Footer__laba,href:"https://laba-laba.ru/",target:"_blank",rel:"noopener noreferrer",children:"© LABA"})]})]})]})]})]})}export{ue as F,le as N,Z as u};
