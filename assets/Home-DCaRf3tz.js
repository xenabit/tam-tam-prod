import{r as i,j as t,H as D}from"./vendor-Czmxryr-.js";import{u as F,C as Y}from"./carousel-Bzu2ey52.js";import{u as N,F as H}from"./footer-ou05yifC.js";import{L as O}from"./loader-JFlum21C.js";import{I as M}from"./intro-B8P8FdhN.js";import{S as P}from"./slidercharacters-Su8oSVLZ.js";import{A as z}from"./appstoresfirst-DNn6-CCo.js";import{A as W}from"./appstoressecond-BdMp3SDP.js";import{C as q}from"./channels-B3RoighT.js";import{N as V}from"./news-xilTjB4_.js";import{A as $}from"./framer-motion-C-ES3002.js";import"./header-CWLKz_PD.js";import"./ui-CUuf02DM.js";function se(){const E=i.useRef(null),f=i.useRef([]),L=i.useRef(0),a=i.useRef(!1),l=i.useRef(!1),g=i.useRef(!0),p=i.useRef(0),{setCurrentSection:b,currentSection:d,sectionConfig:j,setIsIntroSection:w}=F(),{scrollToSection:y}=N(),u=[{component:M,id:"intro"},{component:P,id:"slider"},{component:z,id:"storesFirst"},{component:Y,id:"carousel"},{component:q,id:"channels"},{component:W,id:"storesSecond"},{component:V,id:"news"},{component:H,id:"footer"}];return i.useEffect(()=>{if(window.location.hash){const r=window.location.hash.substring(1);setTimeout(()=>{y(r)},1e3)}const n=()=>{if(window.location.hash){const r=window.location.hash.substring(1);y(r)}};return window.addEventListener("hashchange",n),()=>{window.removeEventListener("hashchange",n)}},[y]),i.useEffect(()=>{var C;const n=E.current,r=j.intro,S=(C=r==null?void 0:r.scrollLockDuration)!=null?C:1500,x=setTimeout(()=>{g.current=!1},S),h=e=>{var m,v;if(e<0||e>=u.length){a.current=!1,l.current=!1;return}const o=f.current[e],c=u[e].id,s=j[c];if(!o){a.current=!1,l.current=!1;return}if(!a.current){a.current=!0,l.current=!0;try{o.scrollIntoView({behavior:"smooth"}),b(c),w(c==="intro");const T=(m=s==null?void 0:s.scrollLockDuration)!=null?m:1500;((v=s==null?void 0:s.shouldLockScroll)!=null?v:!0)&&T>0?setTimeout(()=>{a.current=!1,l.current=!1},T):(a.current=!1,l.current=!1)}catch(T){a.current=!1,l.current=!1}}},I=new IntersectionObserver(e=>{e.forEach(o=>{if(o.isIntersecting&&!a.current){const c=f.current.indexOf(o.target);c!==-1&&(b(u[c].id),w(u[c].id==="intro"))}})},{root:n,threshold:.8});f.current.forEach((e,o)=>{e&&I.observe(e)});const k=e=>{e.preventDefault();const o=Date.now();if(g.current||a.current||l.current||o-p.current<300)return;l.current=!0;const c=e.deltaY>0?1:-1,s=u.findIndex(m=>m.id===d);h(s+c),p.current=o},A=e=>{L.current=e.touches[0].clientY},R=e=>{e.preventDefault();const o=Date.now();if(g.current||a.current||o-p.current<300)return;const c=e.touches[0].clientY,s=L.current-c;if(Math.abs(s)>50){const m=u.findIndex(v=>v.id===d);s>0?h(m+1):s<0&&h(m-1),p.current=o}};return n.addEventListener("wheel",k,{passive:!1}),n.addEventListener("touchstart",A,{passive:!1}),n.addEventListener("touchmove",R,{passive:!1}),()=>{clearTimeout(x),n.removeEventListener("wheel",k),n.removeEventListener("touchstart",A),n.removeEventListener("touchmove",R),f.current.forEach(e=>{e&&I.unobserve(e)})}},[b,d,w]),t.jsxs(t.Fragment,{children:[t.jsxs(D,{children:[t.jsx("title",{children:"Тамагочи"}),t.jsx("meta",{name:"description",content:"TamTam Мой милый питомец"}),t.jsx("meta",{name:"keywords",content:"Книга Перемен, И-Цзин, гадание онлайн, гексаграммы, китайская философия, канон перемен"}),t.jsx("meta",{property:"og:title",content:"TamTam Мой милый питомец"}),t.jsx("meta",{property:"og:description",content:"TamTam Мой милый питомец"}),t.jsx("meta",{property:"og:url",content:"https://xenabit.github.io/tam-tam-prod/"}),t.jsx("script",{type:"application/ld+json",children:JSON.stringify({"@context":"https://schema.org","@type":"WebPage",name:"TamTam Мой милый питомец",description:"TamTam Мой милый питомец",url:"https://xenabit.github.io/tam-tam-prod/",image:"/preview-image.jpg",publisher:{"@type":"Organization",name:"LABA",logo:{"@type":"ImageObject",url:"https://xenabit.github.io/tam-tam-prod/logo-laba.svg"}}})}),t.jsx("meta",{httpEquiv:"Content-Security-Policy",content:"default-src 'self'; img-src 'self' https://iching.laba-laba.ru https://mc.yandex.ru data:; script-src 'self' https://mc.yandex.ru 'sha256-GylAe+ymyzx4MREH3q81FRQ39P6rjlCCFoz0YjMxgVc='; style-src 'self' 'unsafe-inline'; font-src 'self' data:; connect-src 'self' https://mc.yandex.ru https://api.yourdomain.com; frame-src 'self' https://mc.yandex.ru;"})]}),t.jsx("main",{children:t.jsx("div",{className:"scroll-container",ref:E,children:t.jsx(i.Suspense,{fallback:t.jsx(O,{}),children:t.jsx($,{children:u.map(({component:n,id:r},S)=>{var x;return t.jsx("section",{className:"section",tabIndex:0,ref:h=>f.current[S]=h,style:{backgroundColor:((x=j[r])==null?void 0:x.background)||"#ffffff"},children:t.jsx(n,{id:r,isActive:d===r},`${r}-${d}`)},r)})})})})})]})}export{se as default};
