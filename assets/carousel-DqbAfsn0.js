import{r as s,j as c,g as v,M as Q}from"./vendor-Czmxryr-.js";import{u as V}from"./appstoresfirst-CXhrKgcP.js";const X={intro:{background:"#5B71C1",fill:"#5B71C1",outline:"#FCCD67",scrollLockDuration:2e3},slider:{background:"#39C883",fill:"#2EA56C",outline:"#FCCD67",scrollLockDuration:1500},storesFirst:{background:"#EA437B",fill:"#C41650",outline:"#F49CBA",scrollLockDuration:2e3},carousel:{background:"#39C883",fill:"#2EA56C",outline:"#FCCD67",scrollLockDuration:8e3},carousel:{background:"#39C883",fill:"#2EA56C",outline:"#FCCD67",scrollLockDuration:8e3},channels:{background:"#5B71C1",fill:"#5B71C1",outline:"#FCCD67",scrollLockDuration:6e3},storesSecond:{background:"#39C883",fill:"#2EA56C",outline:"#FCCD67",scrollLockDuration:2e3},news:{background:"#EA437B",fill:"#C41650",outline:"#F49CBA",scrollLockDuration:4e3},footer:{background:"#5B71C1",fill:"#5B71C1",outline:"#FCCD67",scrollLockDuration:6e3}},H=s.createContext();function qe({children:b}){const[l,a]=s.useState("intro"),[C,d]=s.useState(!0),[w,o]=s.useState(0),[y,g]=s.useState(0),x=s.useCallback(u=>{o(u)},[]),_=s.useCallback(u=>{g(u)},[]),p={currentSection:l,setCurrentSection:u=>{a(u),d(u==="intro")},sectionConfig:X,isIntroSection:C,setIsIntroSection:d,carouselSlide:w,updateCarouselSlide:x,sliderSlide:y,updateSliderlSlide:_};return c.jsx(H.Provider,{value:p,children:b})}const J=()=>s.useContext(H),Y="/tam-tam-prod/assets/images/pet-1.png",Z="/tam-tam-prod/assets/images/pet-1.avif",ee="/tam-tam-prod/assets/images/pet-1.webp",te="/tam-tam-prod/assets/images/pet-2.png",re="/tam-tam-prod/assets/images/pet-2.avif",ae="/tam-tam-prod/assets/images/pet-2.webp",se="/tam-tam-prod/assets/images/pet-3.png",oe="/tam-tam-prod/assets/images/pet-3.avif",ie="/tam-tam-prod/assets/images/pet-3.webp",U="/tam-tam-prod/assets/images/carousel-intro-1.png",ne="/tam-tam-prod/assets/images/carousel-intro-1.avif",G="/tam-tam-prod/assets/images/carousel-intro-2.png",ce="/tam-tam-prod/assets/images/carousel-intro-2.avif",le="/tam-tam-prod/assets/images/carousel-text.svg",ue="/tam-tam-prod/assets/images/carousel-text-mob.svg",me="/tam-tam-prod/assets/images/carouse-1.png",de="/tam-tam-prod/assets/images/carouse-1.avif",pe="/tam-tam-prod/assets/images/carouse-1.webp",ge="/tam-tam-prod/assets/images/carouse-2.png",fe="/tam-tam-prod/assets/images/carouse-2.avif",be="/tam-tam-prod/assets/images/carouse-2.webp",Ce="/tam-tam-prod/assets/images/carouse-3.png",xe="/tam-tam-prod/assets/images/carouse-3.avif",ye="/tam-tam-prod/assets/images/carouse-3.webp",_e="/tam-tam-prod/assets/images/carouse-4.png",ve="/tam-tam-prod/assets/images/carouse-4.avif",we="/tam-tam-prod/assets/images/carouse-4.webp",he="/tam-tam-prod/assets/images/carouse-5.png",ke="/tam-tam-prod/assets/images/carouse-5.avif",Se="/tam-tam-prod/assets/images/carouse-5.webp",Fe="/tam-tam-prod/assets/images/carouse-6.png",Be="/tam-tam-prod/assets/images/carouse-6.avif",Ae="/tam-tam-prod/assets/images/carouse-6.webp",je="/tam-tam-prod/assets/images/carouse-7.png",De="/tam-tam-prod/assets/images/carouse-7.avif",Ee="/tam-tam-prod/assets/images/carouse-7.webp";function Re({id:b,isActive:l}){const a=V(),C=s.useRef(null),d=s.useRef(null),w=s.useRef(null),o=s.useRef([]),y=s.useRef([]),g=s.useRef(null),x=s.useRef(null),_=s.useRef(null),h=s.useRef(null),[p,u]=s.useState(!1),[R,I]=s.useState(!1),{updateCarouselSlide:k}=J(),[Ie,Me]=s.useState(0);s.useEffect(()=>()=>{l||(k(0),u(!1),I(!1))},[l,k]);const S=s.useMemo(()=>[{picture:{img:U,avif:ne,webp:U},angle:14,title:"Пшеница"},{picture:{img:G,avif:ce,webp:G},angle:0,title:"Тортик"}],[]),j=s.useMemo(()=>[{title:"Люби",icon:{img:me,avif:de,webp:pe}},{title:"Играй",icon:{img:ge,avif:fe,webp:be}},{title:"Ухаживай",icon:{img:Ce,avif:xe,webp:ye}},{title:"Наряжай",icon:{img:_e,avif:ve,webp:we}},{title:"Корми",icon:{img:he,avif:ke,webp:Se}},{title:"Заботься",icon:{img:Fe,avif:Be,webp:Ae}},{title:"Веселись",icon:{img:je,avif:De,webp:Ee}}],[]),M=s.useMemo(()=>[{x:a?"-352%":"-259%",y:"-214%",width:a?"5.5rem":"9.3vw",isSpecial:!1},{x:"-311%",y:"-81%",width:a?"6rem":"10vw",isSpecial:!1},{x:"-214%",y:"43%",width:a?"6.5rem":"11vw",isSpecial:!1},{x:"-50%",y:"74%",width:a?"7rem":"12vw",isSpecial:!0,background:"#2ea56c",borderColor:"#80dcb0",scaleImg:1.5,scaleTitle:a?"1.222":"1.333"},{x:"110%",y:"41%",width:a?"6.5rem":"11vw",isSpecial:!1},{x:"212%",y:"-82%",width:a?"6rem":"10vw",isSpecial:!1},{x:a?"253%":"157%",y:"-217%",width:a?"5.5rem":"9.3vw",isSpecial:!1,isAround:!0}],[]),m=s.useMemo(()=>[{pet:{img:se,avif:oe,webp:ie,alt:"TamTam Котёнок"},background:"#39C883",fill:"#2EA56C",outline:"#FCCD67",borderBack:"#FFFFFFA3",borderMain:"#80DCB0",iconBack:"#82CAA7",iconMain:"#2EA56C",specialBackground:"#2ea56c",specialBorder:"#80dcb0"},{pet:{img:te,avif:re,webp:ae,alt:"TamTam Ягнёнок"},background:"#EA437B",fill:"#C41650",outline:"#F49CBA",borderBack:"#FFFFFFA3",borderMain:"#F49CBA",iconBack:"#DD89A6",iconMain:"#C41650",specialBackground:"#C41650",specialBorder:"#F49CBA"},{pet:{img:Y,avif:Z,webp:ee,alt:"TamTam Щенок"},background:"#FFBE2D",fill:"#FFBE2D",outline:"#FFD881",borderBack:"#FFFFFFA3",borderMain:"#FFE6AF",iconBack:"#E4C37A",iconMain:"#FFBE2D",specialBackground:"#FFBE2D",specialBorder:"#FFE6AF"}],[]);typeof window!="undefined"&&v.registerPlugin(Q);const N=s.useCallback(()=>{if(!C.current)return;const r=v.context(()=>{const e=v.timeline({onComplete:()=>{u(!0),I(!0)}});if(d.current&&e.to(d.current,{scale:1,duration:1.2,ease:"elastic.out(0.9, 0.6)"},.5),y.current.forEach((t,i)=>{if(!t||!S[i])return;const n=S[i].angle;e.to(t,{opacity:1,rotation:n,duration:1,ease:"linear"},2)}),d.current&&e.to(d.current,{top:"-100%",duration:1,ease:"linear"},4),y.current.forEach(t=>{t&&e.to(t,{top:"-100%",duration:1,ease:"linear"},4)}),e.to(x.current,{scale:1,duration:1,ease:"elastic.out(0.9, 0.6)"},5.5),o.current[0]&&e.set(o.current[0],{x:"-50%",y:"74%",width:a?"7rem":"12vw"},5.5),o.current[1]&&e.set(o.current[1],{x:"110%",y:"41%",width:a?"6.5rem":"11vw"},5.5),o.current[2]&&e.set(o.current[2],{x:"212%",y:"-82%",width:a?"6rem":"10vw"},5.5),o.current[3]&&e.set(o.current[3],{x:a?"253%":"157%",y:"-217%",width:a?"5.5rem":"9.3vw"},5.5),o.current[4]&&e.set(o.current[4],{x:a?"-352%":"-259%",y:"-214%",width:a?"5.5rem":"9.3vw"},5.5),o.current[5]&&e.set(o.current[5],{x:"-311%",y:"-81%",width:a?"6rem":"10vw"},5.5),o.current[6]&&e.set(o.current[6],{x:"-214%",y:"43%",width:a?"6.5rem":"11vw"},5.5),e.to(w.current,{opacity:1,duration:.6,ease:"none"},5.7),o.current[0]&&e.to(o.current[0],{duration:1.2,ease:"linear",motionPath:{path:[{x:"-50%",y:"74%"},{x:"-214%",y:"43%"},{x:"-311%",y:"-81%"},{x:a?"-352%":"-259%",y:"-214%"}],curviness:1.2,type:"soft"},width:a?"5.5rem":"9.3vw"},5.7),o.current[1]&&e.to(o.current[1],{duration:1.2,ease:"linear",motionPath:{path:[{x:"110%",y:"41%"},{x:"-50%",y:"74%"},{x:"-214%",y:"43%"},{x:"-311%",y:"-81%"}],curviness:1.2,type:"soft"},width:a?"6rem":"10vw"},5.7),o.current[2]&&e.to(o.current[2],{duration:1.2,ease:"linear",motionPath:{path:[{x:"212%",y:"-82%"},{x:"110%",y:"41%"},{x:"-50%",y:"74%"},{x:"-214%",y:"43%"}],curviness:1.2,type:"soft"},width:a?"6.5rem":"11vw"},5.7),o.current[3]&&e.to(o.current[3],{duration:1.2,ease:"linear",motionPath:{path:[{x:a?"253%":"157%",y:"-217%"},{x:"212%",y:"-82%"},{x:"110%",y:"41%"},{x:"-50%",y:"74%"}],curviness:1.2,type:"soft"},width:a?"7rem":"12vw"},5.7),o.current[4]&&e.to(o.current[4],{duration:1.2,ease:"linear",motionPath:{path:[{x:a?"-352%":"-259%",y:"-214%"},{x:"-50%",y:a?"-350%":"-284%"},{x:a?"253%":"157%",y:"-217%"},{x:"212%",y:"-82%"},{x:"110%",y:"41%"}],curviness:1.5,type:"soft"},width:a?"6.5rem":"11vw"},5.7),o.current[5]&&e.to(o.current[5],{duration:1.2,ease:"linear",motionPath:{path:[{x:"-311%",y:"-81%"},{x:a?"-352%":"-259%",y:"-214%"},{x:"-50%",y:a?"-350%":"-284%"},{x:a?"253%":"157%",y:"-217%"},{x:"212%",y:"-82%"}],curviness:1.5,type:"soft"},width:a?"6rem":"10vw"},5.7),o.current[6]&&e.to(o.current[6],{duration:1.2,ease:"linear",motionPath:{path:[{x:"-214%",y:"43%"},{x:"-311%",y:"-81%"},{x:a?"-352%":"-259%",y:"-214%"},{x:"-50%",y:a?"-350%":"-284%"},{x:a?"253%":"157%",y:"-217%"}],curviness:1.5,type:"soft"},width:a?"5.5rem":"9.3vw"},5.7),o.current[3]){const t=o.current[3].querySelector(".Carousel__icon"),i=t==null?void 0:t.querySelector("img"),n=o.current[3].querySelector(".Carousel__title");t&&(e.to(t,{backgroundColor:"#2ea56c",borderColor:"#80dcb0",duration:1,ease:"power2.inOut"},6.9),i&&e.to(i,{scale:1.5,duration:1,ease:"power2.inOut"},6.9)),n&&e.to(n,{scale:a?"1.2":"1.3334",duration:1,ease:"power2.inOut"},6.9)}h.current=e},C);return()=>r.revert()},[S]);s.useEffect(()=>(l&&!p&&N(),()=>{h.current&&h.current.kill()}),[l,p,N]);const T=s.useCallback((r,e,t)=>{t.to(r,{duration:1.5,ease:"power2.inOut",motionPath:{path:[{x:"-50%",y:a?"-350%":"-284%"},{x:e.x,y:e.y}],curviness:1.5,type:"soft"},width:e.width},0)},[]),q=s.useCallback((r,e,t)=>{t.to(r,{duration:1.5,ease:"power2.inOut",x:e.x,y:e.y,width:e.width},0)},[]),L=s.useCallback((r,e,t,i)=>{const n={duration:1.5,ease:"power2.inOut"};e.isSpecial?(n.backgroundColor=t.specialBackground,n.borderColor=t.specialBorder):(n.backgroundColor=t.iconBack,n.borderColor=t.borderBack),i.to(r,n,0)},[]),O=s.useCallback((r,e,t)=>{t.to(r,{duration:1.5,ease:"power2.inOut",scale:e.isSpecial?e.scaleImg||1.5:1},0)},[]),P=s.useCallback((r,e,t)=>{t.to(r,{duration:1.5,ease:"power2.inOut",scale:e.isSpecial?e.scaleTitle||"1.2":a?"1.1":"1.2"},0)},[]),$=s.useCallback((r,e,t,i)=>{if(!r)return;const n=r.querySelector(".Carousel__icon"),f=n==null?void 0:n.querySelector("img"),A=r.querySelector(".Carousel__title");e.isAround?T(r,e,i):q(r,e,i),n&&(L(n,e,t,i),f&&O(f,e,i)),A&&P(A,e,i)},[T,q,L,O,P]),F=s.useCallback(()=>{const r=Array(7);for(let e=0;e<7;e++)r[e]={item:j[e],position:M[e]};return r},[j,M]),D=s.useCallback(r=>{if(!r)return F();const e=Array(7),t=r[6];for(let i=6;i>0;i--)e[i]=r[i-1];return e[0]=t,e},[F]),B=s.useCallback(r=>m[r%m.length],[m]),z=s.useCallback((r,e,t)=>{if(!_.current)return;const i=B(t-1),n=_.current;n.style.setProperty("--bg-color-current",i.background),n.style.setProperty("--bg-color-next",r.background),e.fromTo(n,{"--bg-progress":"0%",background:"linear-gradient(to left, var(--bg-color-next) 0%, var(--bg-color-next) 0%, var(--bg-color-current) 0%, var(--bg-color-current) 100%)"},{"--bg-progress":"100%",duration:1,ease:"power2.inOut",background:"linear-gradient(to left, var(--bg-color-next) 0%, var(--bg-color-next) var(--bg-progress), var(--bg-color-current) var(--bg-progress), var(--bg-color-current) 100%)",onComplete:()=>{n.style.background=r.background,n.style.setProperty("--bg-color-current",r.background)}},0)},[B]),W=s.useCallback((r,e)=>{if(!x.current)return;const t=x.current.querySelector(".Carousel__picture"),i=t==null?void 0:t.querySelector("img"),n=t==null?void 0:t.querySelector('source[type="image/avif"]'),f=t==null?void 0:t.querySelector('source[type="image/webp"]');!t||!i||(e.to(t,{duration:.5,ease:"power2.in",opacity:0,scale:.8,y:20},.2),e.add(()=>{n&&n.setAttribute("srcset",r.pet.avif),f&&f.setAttribute("srcset",r.pet.webp),i.setAttribute("src",r.pet.img),i.setAttribute("alt",r.pet.alt)},.7),e.to(t,{duration:1,ease:"elastic.out(0.9, 0.5)",opacity:1,scale:1,y:0},.7))},[]),E=s.useCallback((r,e)=>{if(!r||!o.current.length)return;g.current&&g.current.kill();const t=v.context(()=>{const i=v.timeline(),n=B(e);z(n,i,e),W(n,i),r.forEach(({position:f},A)=>{const K=o.current[A];$(K,f,n,i)}),g.current=i},C);return k(e%m.length),()=>t.revert()},[B,z,W,$,k,m.length]);return s.useEffect(()=>{if(!l||!p||!R)return;let r=F(),e=0;const t=setTimeout(()=>{const n=D(r);E(n,e+1),r=n,e++},500),i=setInterval(()=>{const n=D(r);E(n,e+1),r=n,e++},3500);return()=>{clearTimeout(t),clearInterval(i),g.current&&g.current.kill()}},[l,p,R,F,D,E]),c.jsxs("div",{id:b,ref:C,className:"Carousel",role:"region","aria-label":"Карусель ухода за питомцем",children:[c.jsx("div",{ref:_,className:"Carousel__background","aria-hidden":"true"}),c.jsxs("div",{className:"Carousel__container",children:[c.jsxs("div",{className:"Carousel__intro","aria-hidden":p,children:[c.jsx("div",{ref:d,className:"Carousel__text",children:c.jsx("img",{src:a?ue:le,width:"970",height:"296",alt:"Как заботиться о питомце?",loading:"lazy",decoding:"async"})}),c.jsx("ul",{className:"Carousel__elements",children:S.map(({picture:r,title:e},t)=>c.jsx("li",{ref:i=>y.current[t]=i,className:`Carousel__element Carousel__element_${t+1}`,"aria-hidden":"true",children:c.jsxs("picture",{children:[c.jsx("source",{type:"image/avif",srcSet:r.avif}),c.jsx("source",{type:"image/webp",srcSet:r.webp}),c.jsx("img",{src:r.img,width:"581",height:"598",alt:e,loading:"lazy",decoding:"async"})]})},`intro_${t}`))})]}),c.jsxs("div",{className:"Carousel__carousel","aria-hidden":!p,children:[c.jsx("div",{ref:x,className:"Carousel__character",children:c.jsx("div",{className:"Carousel__picture",children:c.jsxs("picture",{children:[c.jsx("source",{type:"image/avif",srcSet:m[0].pet.avif}),c.jsx("source",{type:"image/webp",srcSet:m[0].pet.webp}),c.jsx("img",{src:m[0].pet.img,width:"447",height:"564",alt:m[0].pet.alt,loading:"lazy",decoding:"async"})]})})}),c.jsx("ul",{ref:w,className:"Carousel__items",role:"list","aria-label":"Способы ухода за питомцем",children:j.map(({title:r,icon:e},t)=>c.jsxs("li",{ref:i=>o.current[t]=i,className:`Carousel__item Carousel__item_${t+1}`,role:"listitem","aria-label":r,children:[c.jsx("div",{className:"Carousel__icon",children:c.jsxs("picture",{children:[c.jsx("source",{type:"image/avif",srcSet:e.avif}),c.jsx("source",{type:"image/webp",srcSet:e.webp}),c.jsx("img",{src:e.img,width:"395",height:"395",alt:"",loading:"lazy",decoding:"async","aria-hidden":"true"})]})}),c.jsx("div",{className:"Carousel__title",children:r})]},`item_${t}`))})]})]})]})}function Le({id:b,isActive:l}){const{currentSection:a}=J();return c.jsx(Re,{id:b,isActive:l},`${b}-${a}`)}export{Le as C,qe as S,Z as a,Y as b,ae as c,re as d,te as e,ie as f,oe as g,se as h,ee as p,J as u};
